<?php return array (
  '46963937ea7e5e1e41538664e5217a6e' => 
  array (
    'criteria' => 
    array (
      'name' => 'tag_manager2',
    ),
    'object' => 
    array (
      'name' => 'tag_manager2',
      'path' => '{core_path}components/tag_manager2/',
      'assets_path' => '{assets_path}components/tag_manager2/',
    ),
  ),
  '9ebf723298ba246b90e3f8172459f537' => 
  array (
    'criteria' => 
    array (
      'text' => 'tag_manager2',
    ),
    'object' => 
    array (
      'text' => 'tag_manager2',
      'parent' => 'components',
      'action' => 'index',
      'description' => 'tag_manager2_desc',
      'icon' => '',
      'menuindex' => 0,
      'params' => '',
      'handler' => '',
      'permissions' => '',
      'namespace' => 'tag_manager2',
    ),
  ),
  '1ba0a40f5949bd77f2b42f72ed2cd820' => 
  array (
    'criteria' => 
    array (
      'key' => 'tag_mgr2.catalog_context',
    ),
    'object' => 
    array (
      'key' => 'tag_mgr2.catalog_context',
      'value' => 'web',
      'xtype' => 'textfield',
      'namespace' => 'tag_manager2',
      'area' => 'module',
      'editedon' => NULL,
    ),
  ),
  '9af6bb1d6ef1abf5c8e1a4977ed0ee86' => 
  array (
    'criteria' => 
    array (
      'key' => 'tag_mgr2.catalog_id',
    ),
    'object' => 
    array (
      'key' => 'tag_mgr2.catalog_id',
      'value' => '4',
      'xtype' => 'textfield',
      'namespace' => 'tag_manager2',
      'area' => 'module',
      'editedon' => '2017-02-15 22:54:17',
    ),
  ),
  '865be2193d2dd68a4177563f7b5d3daa' => 
  array (
    'criteria' => 
    array (
      'key' => 'tag_mgr2.className',
    ),
    'object' => 
    array (
      'key' => 'tag_mgr2.className',
      'value' => 'modResource',
      'xtype' => 'textfield',
      'namespace' => 'tag_manager2',
      'area' => 'module',
      'editedon' => NULL,
    ),
  ),
  'df16e034d38c5fa9cb17268f330a7576' => 
  array (
    'criteria' => 
    array (
      'key' => 'tag_mgr2.packageName',
    ),
    'object' => 
    array (
      'key' => 'tag_mgr2.packageName',
      'value' => 'modResource',
      'xtype' => 'textfield',
      'namespace' => 'tag_manager2',
      'area' => 'module',
      'editedon' => NULL,
    ),
  ),
  '139ebde76d047cb48846484dc6be179f' => 
  array (
    'criteria' => 
    array (
      'key' => 'tag_mgr2.guard_key',
    ),
    'object' => 
    array (
      'key' => 'tag_mgr2.guard_key',
      'value' => '#',
      'xtype' => 'textfield',
      'namespace' => 'tag_manager2',
      'area' => 'module',
      'editedon' => NULL,
    ),
  ),
  '523f07658126d494219c77127fa6c3c5' => 
  array (
    'criteria' => 
    array (
      'key' => 'tag_mgr2.multitags',
    ),
    'object' => 
    array (
      'key' => 'tag_mgr2.multitags',
      'value' => 'price',
      'xtype' => 'textfield',
      'namespace' => 'tag_manager2',
      'area' => 'module',
      'editedon' => '2017-02-15 22:55:58',
    ),
  ),
  'f526148fd7467d69abd711c2201c19b3' => 
  array (
    'criteria' => 
    array (
      'key' => 'tag_mgr2.numeric',
    ),
    'object' => 
    array (
      'key' => 'tag_mgr2.numeric',
      'value' => 'price',
      'xtype' => 'textfield',
      'namespace' => 'tag_manager2',
      'area' => 'module',
      'editedon' => '2017-02-15 22:55:44',
    ),
  ),
  '4ea5944e56bbefe22c86fcbff974bf4a' => 
  array (
    'criteria' => 
    array (
      'key' => 'tag_mgr2.prod_templates',
    ),
    'object' => 
    array (
      'key' => 'tag_mgr2.prod_templates',
      'value' => '3,6,7',
      'xtype' => 'textfield',
      'namespace' => 'tag_manager2',
      'area' => 'module',
      'editedon' => '2017-02-15 22:55:17',
    ),
  ),
  'c9b91391a9d141ab2174bd217fd6d970' => 
  array (
    'criteria' => 
    array (
      'key' => 'tag_mgr2.propertySetName',
    ),
    'object' => 
    array (
      'key' => 'tag_mgr2.propertySetName',
      'value' => 'catalog_filters',
      'xtype' => 'textfield',
      'namespace' => 'tag_manager2',
      'area' => 'module',
      'editedon' => NULL,
    ),
  ),
  '9abbd21ba95683c6c7466cf357075111' => 
  array (
    'criteria' => 
    array (
      'key' => 'tag_mgr2.propertySetSnippet',
    ),
    'object' => 
    array (
      'key' => 'tag_mgr2.propertySetSnippet',
      'value' => 'getPage',
      'xtype' => 'textfield',
      'namespace' => 'tag_manager2',
      'area' => 'module',
      'editedon' => NULL,
    ),
  ),
  '9717dfa75eccafdce63f7dad933e1d2d' => 
  array (
    'criteria' => 
    array (
      'name' => 'tmRefresh',
    ),
    'object' => 
    array (
      'id' => 14,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tmRefresh',
      'description' => 'Refresh tagManager filters data.',
      'editor_type' => 0,
      'category' => 0,
      'cache_type' => 0,
      'plugincode' => '',
      'locked' => 0,
      'properties' => 'a:0:{}',
      'disabled' => 1,
      'moduleguid' => '',
      'static' => 1,
      'static_file' => 'core/components/tag_manager2/elements/plugins/plugin.tm_refresh.php',
      'content' => '',
    ),
  ),
  'd16f670bb9d1eec6b524eb9d9b232fc6' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 14,
      'event' => 'OnDocFormSave',
    ),
    'object' => 
    array (
      'pluginid' => 14,
      'event' => 'OnDocFormSave',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  'f9b9723dfce9e97f524c6509d78bb589' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 14,
      'event' => 'OnCacheUpdate',
    ),
    'object' => 
    array (
      'pluginid' => 14,
      'event' => 'OnCacheUpdate',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '5dd8c998e9dd5b3ae85f45d4258fb11e' => 
  array (
    'criteria' => 
    array (
      'category' => 'tagManager2',
    ),
    'object' => 
    array (
      'id' => 14,
      'parent' => 0,
      'category' => 'tagManager2',
      'rank' => 0,
    ),
  ),
  'd81b05af59040134266ea8733fd7b61f' => 
  array (
    'criteria' => 
    array (
      'name' => 'tm2_filterNumericTpl',
    ),
    'object' => 
    array (
      'id' => 36,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tm2_filterNumericTpl',
      'description' => '',
      'editor_type' => 0,
      'category' => 14,
      'cache_type' => 0,
      'snippet' => '<div id="range_[[+name]]" class="range-slider"></div>
<div class="filter_slider">
    от
    <input type="text" id="[[+name]]Min" value="[[+min]]" name="f_[[+name]][from]" style="width:50px;" />
    до
    <input type="text" id="[[+name]]Max" value="[[+max]]" name="f_[[+name]][to]" style="width:50px;" />
</div>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => '',
      'content' => '<div id="range_[[+name]]" class="range-slider"></div>
<div class="filter_slider">
    от
    <input type="text" id="[[+name]]Min" value="[[+min]]" name="f_[[+name]][from]" style="width:50px;" />
    до
    <input type="text" id="[[+name]]Max" value="[[+max]]" name="f_[[+name]][to]" style="width:50px;" />
</div>',
    ),
  ),
  'd21d7d12fa523cbb2057f39c24a0e286' => 
  array (
    'criteria' => 
    array (
      'name' => 'tm2_filterOuterTpl',
    ),
    'object' => 
    array (
      'id' => 37,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tm2_filterOuterTpl',
      'description' => '',
      'editor_type' => 0,
      'category' => 14,
      'cache_type' => 0,
      'snippet' => '<div class="filter_block">
    
    <div class="filter_head"><h3>[[+caption]]</h3></div>
    
    [[+inner]]

</div>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => '',
      'content' => '<div class="filter_block">
    
    <div class="filter_head"><h3>[[+caption]]</h3></div>
    
    [[+inner]]

</div>',
    ),
  ),
  '560f7aeb87241523e12a76836529210b' => 
  array (
    'criteria' => 
    array (
      'name' => 'tm2_filterOuterTpl_select',
    ),
    'object' => 
    array (
      'id' => 38,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tm2_filterOuterTpl_select',
      'description' => '',
      'editor_type' => 0,
      'category' => 14,
      'cache_type' => 0,
      'snippet' => '<div class="filter_block">
    
    <div class="filter_head"><h3>[[+caption]]</h3></div>
    
    <select name="f_[[+name]]" style="width:210px;">
        <option value="">Все</option>
        [[+inner]]
    </select>
    
</div>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => '',
      'content' => '<div class="filter_block">
    
    <div class="filter_head"><h3>[[+caption]]</h3></div>
    
    <select name="f_[[+name]]" style="width:210px;">
        <option value="">Все</option>
        [[+inner]]
    </select>
    
</div>',
    ),
  ),
  '6f20e20a36e39fc5c3946b5ad3504501' => 
  array (
    'criteria' => 
    array (
      'name' => 'tm2_filterTpl',
    ),
    'object' => 
    array (
      'id' => 39,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tm2_filterTpl',
      'description' => '',
      'editor_type' => 0,
      'category' => 14,
      'cache_type' => 0,
      'snippet' => '<div class="filter_row">
    <input type="checkbox" id="[[+name]]__[[+idx]]" name="[[+flt_name]]" value="[[+value]]" />
    <label for="[[+name]]__[[+idx]]">[[+value_name]]</label>
</div>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => '',
      'content' => '<div class="filter_row">
    <input type="checkbox" id="[[+name]]__[[+idx]]" name="[[+flt_name]]" value="[[+value]]" />
    <label for="[[+name]]__[[+idx]]">[[+value_name]]</label>
</div>',
    ),
  ),
  '11a44a6746209acb9f1843bbec09386f' => 
  array (
    'criteria' => 
    array (
      'name' => 'tm2_filterTpl_select',
    ),
    'object' => 
    array (
      'id' => 40,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tm2_filterTpl_select',
      'description' => '',
      'editor_type' => 0,
      'category' => 14,
      'cache_type' => 0,
      'snippet' => '<option value="[[+value]]">[[+value_name]]</option>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => '',
      'content' => '<option value="[[+value]]">[[+value_name]]</option>',
    ),
  ),
  '9955060783b74403f91417eeda64640b' => 
  array (
    'criteria' => 
    array (
      'name' => 'tmFilters',
    ),
    'object' => 
    array (
      'id' => 56,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tmFilters',
      'description' => 'Print filters blocks for catalog.',
      'editor_type' => 0,
      'category' => 14,
      'cache_type' => 0,
      'snippet' => '/**
 * snippet tmFilters
 *
 */

//ini_set(\'display_errors\',1);
//error_reporting(E_ALL);

$create = $modx->getOption(\'create\', $scriptProperties, \'\');
$toPlaceholder = $modx->getOption(\'toPlaceholder\', $scriptProperties, \'\');
$optStyles = $modx->getOption(\'style\', $scriptProperties, 1);
$optJsScripts = $modx->getOption(\'jsScript\', $scriptProperties, 1);

require_once MODX_CORE_PATH."components/tag_manager2/model/tm_filters.class.php";
$tm_filters = new tmFilters($modx, $scriptProperties);

if( $create ){
    $output = $tm_filters->createFilters( $create );
}else{
    $output = $tm_filters->getFiltersOutput();
}

if($toPlaceholder){
    $modx->setPlaceholder($toPlaceholder,$output);
    $output = \'\';
}

if( $optStyles ){
    $modx->regClientCSS($modx->config[\'assets_url\']."components/tag_manager2/css/web/tm-style.css");
}

if( $optJsScripts ){
    
    $filtersType = $modx->getOption(\'filtersType\', $scriptProperties, \'filters\');
    $shk_currency_default = $modx->getOption(\'shk.currency_default\',$scriptProperties,\'\');
    $shk_currency_rate = $modx->getOption(\'shk.currency_rate\',$scriptProperties,\'\');

    if( $optJsScripts != 2 ){
        $modx->regClientScript($modx->config[\'assets_url\']."components/tag_manager2/js/web/jquery-ui-1.10.3.custom.min.js");
        $modx->regClientScript($modx->config[\'assets_url\']."components/tag_manager2/js/web/jquery.history.js");
        $modx->regClientScript($modx->config[\'assets_url\']."components/tag_manager2/js/web/{$filtersType}.js");
        $modx->regClientScript($modx->config[\'assets_url\']."components/tag_manager2/js/web/view_switch.js");
    }

    $options = array(
        \'base_url\' => $modx->getOption(\'base_url\', null, \'/\'),
        \'currency_default\' => $shk_currency_default,
        \'currency_rate\' => $shk_currency_rate
    );
    $headHtml = \'
    <script type="text/javascript">
    var tmFiltersOptions = \'. json_encode( $options ) .\';
    $(document).bind( "ready", function(){
        tmFilters.init( tmFiltersOptions );
    });
    </script>\';
    
    $modx->regClientScript($headHtml,true);
    
}

return $output;',
      'locked' => 0,
      'properties' => 'a:0:{}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => '',
      'content' => '/**
 * snippet tmFilters
 *
 */

//ini_set(\'display_errors\',1);
//error_reporting(E_ALL);

$create = $modx->getOption(\'create\', $scriptProperties, \'\');
$toPlaceholder = $modx->getOption(\'toPlaceholder\', $scriptProperties, \'\');
$optStyles = $modx->getOption(\'style\', $scriptProperties, 1);
$optJsScripts = $modx->getOption(\'jsScript\', $scriptProperties, 1);

require_once MODX_CORE_PATH."components/tag_manager2/model/tm_filters.class.php";
$tm_filters = new tmFilters($modx, $scriptProperties);

if( $create ){
    $output = $tm_filters->createFilters( $create );
}else{
    $output = $tm_filters->getFiltersOutput();
}

if($toPlaceholder){
    $modx->setPlaceholder($toPlaceholder,$output);
    $output = \'\';
}

if( $optStyles ){
    $modx->regClientCSS($modx->config[\'assets_url\']."components/tag_manager2/css/web/tm-style.css");
}

if( $optJsScripts ){
    
    $filtersType = $modx->getOption(\'filtersType\', $scriptProperties, \'filters\');
    $shk_currency_default = $modx->getOption(\'shk.currency_default\',$scriptProperties,\'\');
    $shk_currency_rate = $modx->getOption(\'shk.currency_rate\',$scriptProperties,\'\');

    if( $optJsScripts != 2 ){
        $modx->regClientScript($modx->config[\'assets_url\']."components/tag_manager2/js/web/jquery-ui-1.10.3.custom.min.js");
        $modx->regClientScript($modx->config[\'assets_url\']."components/tag_manager2/js/web/jquery.history.js");
        $modx->regClientScript($modx->config[\'assets_url\']."components/tag_manager2/js/web/{$filtersType}.js");
        $modx->regClientScript($modx->config[\'assets_url\']."components/tag_manager2/js/web/view_switch.js");
    }

    $options = array(
        \'base_url\' => $modx->getOption(\'base_url\', null, \'/\'),
        \'currency_default\' => $shk_currency_default,
        \'currency_rate\' => $shk_currency_rate
    );
    $headHtml = \'
    <script type="text/javascript">
    var tmFiltersOptions = \'. json_encode( $options ) .\';
    $(document).bind( "ready", function(){
        tmFilters.init( tmFiltersOptions );
    });
    </script>\';
    
    $modx->regClientScript($headHtml,true);
    
}

return $output;',
    ),
  ),
  '541b96d75ebad1c639b1244af7a0c1fc' => 
  array (
    'criteria' => 
    array (
      'name' => 'tmCatalog',
    ),
    'object' => 
    array (
      'id' => 57,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tmCatalog',
      'description' => 'Оutput of productы in the catalog.',
      'editor_type' => 0,
      'category' => 14,
      'cache_type' => 0,
      'snippet' => '/**
 * snippet tmCatalog
 *
 */

//error_reporting(E_ALL);
//ini_set(\'display_errors\',1);

$config = array(
    \'snippet\' => $modx->getOption(\'tag_mgr2.propertySetSnippet\',null,\'getPage\'),
    \'elementClass\' => \'modSnippet\',
    \'element\' => \'getProducts\'
);

$output = \'\';

require_once MODX_CORE_PATH."components/tag_manager2/model/tm_catalog.class.php";
$tm_catalog = new tmCatalog($modx, $scriptProperties);

//Приводим строку фильтрации к нормальному виду
list($flt_arr, $parents) = $tm_catalog->getRequestParams();

$snippetProperties = $tm_catalog->getSnippetProperties();

$show = isset($_GET[\'show\']) && !is_array($_GET[\'show\']) ? htmlspecialchars(urldecode(trim($_GET[\'show\']))) : \'\';
$limit = isset($_GET[\'limit\']) && is_numeric($_GET[\'limit\']) ? $_GET[\'limit\'] : $snippetProperties[\'limit\'];
$debug = isset($snippetProperties[\'debug\']) ? $snippetProperties[\'debug\'] : false;
$sortby = isset($_GET[\'sortby\']) && !is_array($_GET[\'sortby\']) ? htmlspecialchars(trim($_GET[\'sortby\'])) : $modx->getOption(\'sortby\',$snippetProperties,\'pagetitle\');
$sortdir = isset($_GET[\'sortdir\']) && !is_array($_GET[\'sortdir\']) ? htmlspecialchars(trim($_GET[\'sortdir\'])) : $modx->getOption(\'sortdir\',$snippetProperties,\'asc\');
if(strtolower($sortdir)==\'rand\' || strtolower($sortby)==\'rand\') { $sortby = \'RAND()\'; }

$sorting = $tm_catalog->getSorting($sortby, $sortdir);

$properties = array_merge($config, $snippetProperties, $sorting);

if(count($flt_arr) > 0){
    if(isset($properties[\'className\']) && $properties[\'className\'] != \'modResource\'){
        $where_arr = !empty($properties[\'where\']) ? $modx->fromJSON($properties[\'where\']) : array();
        $where_arr = array_merge($where_arr,$flt_arr);
        $properties[\'where\'] = json_encode($where_arr);
        $properties[\'tvFilters\'] = \'\';
    }else{
        $properties[\'tvFilters\'] = json_encode($flt_arr);
    }
}

if(count($parents)>0) $properties[\'parents\'] = implode(\',\',$parents);

//if($debug) echo \'<pre>\'.print_r($properties,true).\'</pre>\';

$output .= $modx->runSnippet($config[\'snippet\'], $properties);

if(isset($modx->sanitizePatterns[\'tags1\'])) $output = preg_replace($modx->sanitizePatterns[\'tags1\'], \'\', $output);
if(isset($modx->sanitizePatterns[\'tags2\'])) $output = preg_replace($modx->sanitizePatterns[\'tags2\'], \'\', $output);

return $output;',
      'locked' => 0,
      'properties' => 'a:0:{}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => '',
      'content' => '/**
 * snippet tmCatalog
 *
 */

//error_reporting(E_ALL);
//ini_set(\'display_errors\',1);

$config = array(
    \'snippet\' => $modx->getOption(\'tag_mgr2.propertySetSnippet\',null,\'getPage\'),
    \'elementClass\' => \'modSnippet\',
    \'element\' => \'getProducts\'
);

$output = \'\';

require_once MODX_CORE_PATH."components/tag_manager2/model/tm_catalog.class.php";
$tm_catalog = new tmCatalog($modx, $scriptProperties);

//Приводим строку фильтрации к нормальному виду
list($flt_arr, $parents) = $tm_catalog->getRequestParams();

$snippetProperties = $tm_catalog->getSnippetProperties();

$show = isset($_GET[\'show\']) && !is_array($_GET[\'show\']) ? htmlspecialchars(urldecode(trim($_GET[\'show\']))) : \'\';
$limit = isset($_GET[\'limit\']) && is_numeric($_GET[\'limit\']) ? $_GET[\'limit\'] : $snippetProperties[\'limit\'];
$debug = isset($snippetProperties[\'debug\']) ? $snippetProperties[\'debug\'] : false;
$sortby = isset($_GET[\'sortby\']) && !is_array($_GET[\'sortby\']) ? htmlspecialchars(trim($_GET[\'sortby\'])) : $modx->getOption(\'sortby\',$snippetProperties,\'pagetitle\');
$sortdir = isset($_GET[\'sortdir\']) && !is_array($_GET[\'sortdir\']) ? htmlspecialchars(trim($_GET[\'sortdir\'])) : $modx->getOption(\'sortdir\',$snippetProperties,\'asc\');
if(strtolower($sortdir)==\'rand\' || strtolower($sortby)==\'rand\') { $sortby = \'RAND()\'; }

$sorting = $tm_catalog->getSorting($sortby, $sortdir);

$properties = array_merge($config, $snippetProperties, $sorting);

if(count($flt_arr) > 0){
    if(isset($properties[\'className\']) && $properties[\'className\'] != \'modResource\'){
        $where_arr = !empty($properties[\'where\']) ? $modx->fromJSON($properties[\'where\']) : array();
        $where_arr = array_merge($where_arr,$flt_arr);
        $properties[\'where\'] = json_encode($where_arr);
        $properties[\'tvFilters\'] = \'\';
    }else{
        $properties[\'tvFilters\'] = json_encode($flt_arr);
    }
}

if(count($parents)>0) $properties[\'parents\'] = implode(\',\',$parents);

//if($debug) echo \'<pre>\'.print_r($properties,true).\'</pre>\';

$output .= $modx->runSnippet($config[\'snippet\'], $properties);

if(isset($modx->sanitizePatterns[\'tags1\'])) $output = preg_replace($modx->sanitizePatterns[\'tags1\'], \'\', $output);
if(isset($modx->sanitizePatterns[\'tags2\'])) $output = preg_replace($modx->sanitizePatterns[\'tags2\'], \'\', $output);

return $output;',
    ),
  ),
);